{"version":3,"file":"team-timezone.umd.js","sources":["../src/helpers/state.js","../src/helpers/render.js","../src/components/CurrentTime.js","../src/components/EditTime.js","../src/components/People.js","../src/team-timezone.js","../src/helpers/insertStyles.js","../src/team-timezone.style.js","../src/helpers/delegateEvents.js"],"sourcesContent":["import render from \"./render\";\n\n// rudimentary state management\nconst state = [{}];\n\nexport const getState = () => {\n  return state[state.length - 1];\n};\n\nexport const setState = (nextState) => {\n  const currentState = state[state.length - 1];\n  state.push({\n    ...currentState,\n    ...nextState,\n  })\n\n  render(getState().targetId, getState().Layout);\n};\n","export default (id, layout) => {\n  document.getElementById(id).innerHTML = layout();\n}\n","import ClockIcon from \"./ClockIcon\";\nimport { getState } from \"../helpers/state\";\n\nexport default () => (`\n  <div class=\"cc-ttz:currentContainer\" ${getState().editing ? 'style=\"display: none;\"' : \"\"}>\n    <h2 class=\"cc-ttz:currentTime\">\n      ${getState().currentTime.format(\"h:mm a\")}\n\n      ${getState().showingCustom ?\n        `<button class=\"cc-ttz:cancel\">Clear</button>` :\n        `<button class=\"cc-ttz:enterTime\">Enter time</button>`\n      }\n    </h2>\n\n    <p class=\"cc-ttz:currentTimezoneContainer\">\n      ${getState().showingCustom ?\n        `<span class=\"cc-ttz:currentTimezoneLabel cc-ttz:currentTimezoneCustom\">Custom time</span>` :\n        `<span class=\"cc-ttz:currentTimezoneLabel\">Current time</span>`\n      }\n      <span class=\"cc-ttz:currentTimezoneAbbr\">${getState().currentTime.tz(getState().timezone).format(\"z\")}</span>\n    </p>\n  </div>\n`);\n","import { getState } from \"../helpers/state\";\n\nexport default () => (`\n  <form class=\"cc-ttz:form\" ${getState().editing ? \"\" : 'style=\"display: none;\"'}>\n    <fieldset class=\"cc-ttz:formFieldset\">\n      <input value=\"\" class=\"cc-ttz:formInput\" type=\"text\" placeholder=\"Enter time\">\n      <span class=\"cc-ttz:formTimezoneAbbr\">${ getState().currentTime.tz(getState().timezone).format(\"z\") }</span>\n    </fieldset>\n    <div class=\"cc-ttz:formButtons\">\n      <button type=\"submit\" class=\"cc-ttz:buttonApply\">Apply</button>\n      <button class=\"cc-ttz:cancel cc-ttz:buttonCancel\">Cancel</button>\n    </div>\n  </form>\n`);\n","import moment from \"moment-timezone/builds/moment-timezone-with-data-2012-2022.min\";\nimport { getState } from \"../helpers/state\";\n\nconst getOffsetCopy = (diffInHours) => {\n  if (diffInHours === 0) {\n    return \"Local time\";\n  }\n  return `${diffInHours < 0 ? \"\" : \"+\"}${diffInHours} hours`;\n}\n\nconst sortAndCalculateTimezones = () => {\n  const currentState = { ...getState() };\n  const people = currentState.people.map(person => {\n    const localOffset = getState().currentTime.tz(getState().timezone).utcOffset();\n    const personOffset = getState().currentTime.tz(person.timezone).utcOffset();\n    return {\n      ...person,\n      diffInHours: (localOffset - personOffset) / 60,\n    }\n  });\n\n  people.sort((a, b) => {\n    return a.diffInHours - b.diffInHours;\n  });\n\n  return people;\n};\n\nexport default () => {\n  const people = sortAndCalculateTimezones();\n\n  return `\n    <ul class=\"cc-ttz:people\">\n      ${people.map((person, index) => (`\n        <li class=\"cc-ttz:timezoneItem ${index === 0 ? \"cc-ttz:timezoneItemFirst\" : \"\"} ${index + 1 === getState().people.length ? \"cc-ttz:timezoneItemLast\" : \"\"}\">\n          <span class=\"cc-ttz:timezoneDate\">${ getState().currentTime.tz(person.timezone).format(\"MMM D\") }</span>\n          <h3 class=\"cc-ttz:timezoneTime\">${ getState().currentTime.tz(person.timezone).format(\"h:mm a\") }</h3>\n          <span class=\"cc-ttz:timezoneOffset\">${getOffsetCopy(person.diffInHours)}</span>\n          <div class=\"cc-ttz:personAvatar\">\n            <img class=\"cc-ttz:personAvatarImage\" src=\"${ person.avatar }\" />\n          </div>\n          <span class=\"cc-ttz:personName\">${ person.name }</span>\n        </li>\n      `)).join(\"\")}\n    </ul>\n  `;\n}\n","import moment from \"moment-timezone/builds/moment-timezone-with-data-2012-2022.min\";\nimport Layout from \"./components/Layout\";\nimport insertStyles from \"./helpers/insertStyles\";\nimport delegateEvents from \"./helpers/delegateEvents\";\nimport { getState, setState } from \"./helpers/state\";\n\nexport default (id, people, styleOverrides) => {\n  // setup styles and event delegation (do once)\n  if (styleOverrides != false) {\n    insertStyles(styleOverrides, id);\n  }\n  delegateEvents();\n\n  // set state, which will re-render dom\n  setState({\n    Layout,\n    targetId: id,\n    currentTime: moment(),\n    timezone: moment.tz.guess(),\n    people: people,\n    editing: false,\n    showingCustom: false,\n  });\n\n  setInterval(() => {\n    // set state, with updated time every 60 seconds\n    if (!getState().showingCustom) {\n      setState({\n        currentTime: moment(),\n      });\n    }\n  }, 60000);\n};\n","import style from \"../team-timezone.style.js\";\n\nconst insertStyles = (props, id) => {\n  const css = style(props);\n  const headEl = document.head;\n  const styleEl = document.createElement(\"style\");\n  let str = \"\";\n\n  styleEl.type = \"text/css\";\n  headEl.appendChild(styleEl);\n\n  for (let prop in css) {\n    if (prop !== \"container\") {\n      str = `${str}#${id} .cc-ttz\\\\:container .cc-ttz\\\\:${prop} { ${css[prop]} } `;\n    } else {\n      str = `${str}#${id} .cc-ttz\\\\:${prop} { ${css[prop]} } `;\n    }\n  }\n\n  styleEl.appendChild(document.createTextNode(str));\n}\n\nexport default insertStyles;\n","const style = (props) => {\n  const css = {\n    container: `\n      width: 100%;\n      padding: 25px;\n      box-sizing: border-box;\n      font-family: Helvetica, Arial, sans-serif;\n      min-width: 900px;\n    `,\n    header: `\n      position: relative;\n      height: 50px;\n      margin: 25px 0px;\n    `,\n    title: `\n      font-size: 16px;\n      font-weight: bold;\n      line-height: 100%;\n      color: #121212;\n      padding: 25px;\n      margin: 0;\n      position: absolute;\n      top: 10px;\n      left: 0px;\n      vertical-align: middle;\n    `,\n\n    currentContainer: `\n      text-align: center;\n    `,\n    currentTime: `\n      margin: 0px 0px 3px 0px;\n      padding: 0px;\n      font-size: 24px;\n      font-weight: bold;\n      line-height: 100%;\n    `,\n    currentTimezoneContainer: `\n      margin: 0px;\n      padding: 0px;\n    `,\n    currentTimezoneAbbr: `\n      color: #8B8B8B;\n      font-size: 12px;\n      line-height: 100%;\n    `,\n    currentTimezoneLabel: `\n      display: inline-block;\n      padding: 3px 5px;\n      border-radius: 5px;\n      line-height: 100%;\n      font-size: 12px;\n    `,\n    currentTimezoneCustom: `\n      background-color: #ffc229;\n      color: white;\n      margin-right: 5px;\n      font-size: 12px;\n      font-weight: bold;\n    `,\n    iconClock: `\n      vertical-align: middle;\n    `,\n    enterTime: `\n      vertical-align: middle;\n      background: #f0f0f0;\n      border: 1px solid #e0e0e0;\n      padding: 5px;\n      font-weight: bold;\n      border-radius: 5px;\n    `,\n\n    form: `\n      width: 300px;\n      margin: 0 auto;\n      display: flex;\n      align-items: center;\n    `,\n    formFieldset: `\n      border: none;\n      position: relative;\n      padding: 0px;\n      margin: 0px;\n    `,\n    formInput: `\n      width: 100%;\n      height: 40px;\n      font-size: 16px;\n      padding: 0px 10px;\n      box-sizing: border-box;\n      border: 1px solid #ccc;\n      border-radius: 3px;\n    `,\n    formTimezoneAbbr: `\n      color: #8B8B8B;\n      font-size: 12px;\n      position: absolute;\n      top: 0px;\n      right: 0px;\n      padding: 13px;\n    `,\n    buttonApply: `\n      margin-left: 12px;\n      background: #f0f0f0;\n      border: 1px solid #e0e0e0;\n      padding: 5px;\n      font-weight: bold;\n      border-radius: 5px;\n      display: inline-block;\n    `,\n    buttonCancel: `\n      border: none;\n      background: none;\n    `,\n    buttonClear: `\n      background: #ccc;\n      border: none;\n    `,\n\n    people: `\n      display: flex;\n      border-top: 1px solid #F0F0F0;\n      padding: 25px 0 0 0;\n      margin: 0;\n\n    `,\n    timezoneItem: `\n      width: 16.667%;\n      list-style: none;\n      border-right: 1px solid #F0F0F0;\n      padding: 0 25px;\n      box-sizing: border-box;\n    `,\n    timezoneItemLast: `\n      border: none;\n    `,\n    timezoneItemFirst: ``,\n    timezoneDate: `\n      color: #8B8B8B;\n      font-size: 14px;\n      padding: 0;\n      margin: 0 0 3px 0;\n      display: block;\n      line-height: 100%;\n    `,\n    timezoneTime: `\n      color: #121212;\n      font-size: 18px;\n      font-weight: bold;\n      line-height: 100%;\n      padding: 0;\n      margin: 0 0 3px 0;\n      display: block;\n    `,\n    timezoneOffset: `\n      color: #8B8B8B;\n      font-size: 14px;\n      line-height: 100%;\n    `,\n    personAvatar: `\n      text-align: center;\n    `,\n    personAvatarImage: `\n      width: 100%;\n      display: inline-block;\n      margin: 10px 0px;\n      border-radius: 50%;\n    `,\n    personName: `\n      display: block;\n      text-align: center;\n      color: #8B8B8B;\n      font-size: 12px;\n    `\n  };\n  return {\n    ...css,\n    ...props\n  };\n}\n\nexport default style;\n","import moment from \"moment-timezone/builds/moment-timezone-with-data-2012-2022.min\";\nimport { setState } from \"./state\";\n\nexport default () => {\n  document.addEventListener(\"click\", (event) => {\n  \tif (event.target.matches('.cc-ttz\\\\:enterTime')) {\n      event.preventDefault();\n      setState({ editing: true });\n      document.getElementsByClassName(\"cc-ttz:formInput\")[0].focus();\n  \t}\n  \tif (event.target.matches('.cc-ttz\\\\:cancel')) {\n      event.preventDefault();\n      setState({\n        editing: false,\n        showingCustom: false,\n        currentTime: moment(),\n      });\n  \t}\n  }, false);\n  document.addEventListener(\"submit\", (event) => {\n  \tif (event.target.matches('.cc-ttz\\\\:form')) {\n      event.preventDefault();\n      const time = document.getElementsByClassName(\"cc-ttz:formInput\")[0].value;\n\n      setState({\n        editing: false,\n        showingCustom: true,\n        currentTime: moment(time, [\"h:mm A\"]),\n      });\n  \t}\n  }, false);\n};\n"],"names":["state","getState","length","setState","nextState","id","layout","push","Object","targetId","Layout","document","getElementById","innerHTML","editing","currentTime","format","showingCustom","tz","timezone","people","map","person","localOffset","utcOffset","personOffset","diffInHours","sort","a","b","index","join","styleOverrides","props","css","container","header","title","currentContainer","currentTimezoneContainer","currentTimezoneAbbr","currentTimezoneLabel","currentTimezoneCustom","iconClock","enterTime","form","formFieldset","formInput","formTimezoneAbbr","buttonApply","buttonCancel","buttonClear","timezoneItem","timezoneItemLast","timezoneItemFirst","timezoneDate","timezoneTime","timezoneOffset","personAvatar","personAvatarImage","personName","headEl","head","styleEl","createElement","str","let","prop","type","appendChild","createTextNode","insertStyles","addEventListener","event","target","matches","preventDefault","getElementsByClassName","focus","moment","time","value","guess","setInterval"],"mappings":"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"}